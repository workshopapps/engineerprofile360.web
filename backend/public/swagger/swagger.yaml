
openapi: 3.0.0
servers:
  # Added by API Auto Mocking Plugin
  - description: SwaggerHub API Skript App
    url: http://localhost:8000/api
info:
  version: "1.0.0"
  title: Skript App API
  description: The API for the EatBacon IOT project
paths:
  # register user
  /auth/register:
    post:
      tags:
        - Authentication
      description: 'Register user'
      operationId: register
      responses:
        '200':
          description: successful operation
        '400':
          description: Bad request
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RegisterationInfo'
  # login user
  /auth/login:
    post:
      tags:
        - Authentication
      description: 'Login user'
      operationId: login
      responses:
        '200':
          description: successful operation
        '400':
          description: Bad request
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LoginInfo'
  # /auth/logout:
  #   post:
  #     tags:
  #       - Authentication
  #     description: 'Logout user'
  #     operationId: logout
  #     responses:
  #       '200':
  #         description: successful operation
  #       '400':
  #         description: Bad request
  #     requestBody:
  #       content:
  #         application/json:
  #           schema:
  #             $ref: '#/components/schemas/LogoutInfo'
  # /auth/refresh:
  #   post:
  #     tags:
  #       - Authentication
  #     description: 'Refresh token'
  #     operationId: refresh
  #     responses:
  #       '200':
  #         description: successful operation
  #       '400':
  #         description: Bad request
  #     requestBody:
  #       content:
  #         application/json:
  #           schema:
  #             $ref: '#/components/schemas/Refresh'
  "/auth/password/forgot-password/{email}":
    get:
      tags:
        - Authentication
      description: 'Forgot Password'
      operationId: forgot password
      parameters:
        - name: email
          in: path
          required: true
          type: string
          format: email
          example: "test@mail.com"
      responses:
        '200':
          description: successful operation
        '400':
          description: Bad request
  "/auth/password/reset/{id}/{token}":
    post:
      tags:
        - Authentication
      description: 'Reset Password'
      operationId: reset password
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
          example: "3998502f-f63a-4ba6-b84d-0d85a300dbb4"
        - name: token
          in: path
          required: true
          type: string
          format: uuid
          example: "79b3ac1d2fa1f1f31993"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ResetPassword'
      responses:
        '200':
          description: successful operation
        '400':
          description: Bad request
        '404':
          description: Not Found
  "/auth/verify/{id}/{token}":
    get:
      tags:
        - Authentication
      description: 'Email verification'
      operationId: verify email
      responses:
        '200':
          description: successful operation
        '400':
          description: Bad request
      parameters:
        - name: id
          in: path
          required: true
          type: string
          example: "3379cfe6-dd11-448f-b3be-47d191a7c724"
        - name: token
          in: path
          required: true
          type: string
          example: "9cc2e4b47a6cf88aa4f7"
  /company/all:
    get:
      tags:
        - Company
      description: 'Fetch all companies'
      operationId: company
      responses:
        '200':
          description: successful operation
        '400':
          description: Bad request
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Company'
  /company/update:
    put:
      tags:
        - Company
      description: "Update company's info"
      operationId: update
      responses:
        '200':
          description: successful operation
        '400':
          description: Bad request
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CompanyInfo'
  /user/all:
    get:
      tags:
        - Users
      description: 'Fetch Users'
      operationId: users
      responses:
        '200':
          description: successful operation
        '400':
          description: Bad request
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Users'
    # fetch user
  "/user/{userId}":
    get:
      tags:
        - Users
      description: 'Fetch User'
      operationId: user
      responses:
        '200':
          description: successful operation
        '400':
          description: Bad request
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
    # fetch verified user
  "/user/verified/{userId}":
    get:
      tags:
        - Users
      description: 'Fetch Verified User'
      operationId: verified_user
      responses:
        '200':
          description: successful operation
        '400':
          description: Bad request
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
    # update user
  "/user/{userId}/update":
    put:
      tags:
        - Users
      description: 'Update User'
      operationId: update
      security:
        - bearerAuth: []
      responses:
        '200':
          description: successful operation
        '400':
          description: Bad request
      parameters:
        - name: userId
          in: path
          required: true
          example: "3998502f-f63a-4ba6-b84d-0d85a300dbb4"
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserUpdate'
    # create employee
  /employee/add:
    post:
      tags:
        - Employee
      description: 'Create employee'
      operationId: employee
      responses:
        '200':
          description: successful operation
        '400':
          description: Bad request
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Employee'
    # create category
  /category/add:
    post:
      tags:
        - Category
      description: 'Create Category'
      operationId: category
      responses:
        '200':
          description: successful operation
        '400':
          description: Bad request
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Category'
    # update category
  /user/categoryId/update:
    put:
      tags:
        - Category
      description: 'Update Category'
      operationId: update
      responses:
        '200':
          description: successful operation
        '400':
          description: Bad request
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Category'
    # fetch assessment by organisation
  /assessment/organisationId:
    get:
      tags:
        - Assessment
      description: 'Fetch assessment by organisation'
      operationId: assessment
      responses:
        '200':
          description: successful operation
        '400':
          description: Bad request
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Assessment'
    # update assessment
  /assessment/assessmentId:
    put:
      tags:
        - Assessment
      description: 'Update assessment'
      operationId: update
      responses:
        '200':
          description: successful operation
        '400':
          description: Bad request
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Assessment'
    # create assessment
  /assessment/create:
    post:
      tags:
        - Assessment
      description: 'Create Assessment'
      operationId: assessment
      responses:
        '200':
          description: successful operation
        '400':
          description: Bad request
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Assessment'
    # delete assessment
  /assessment/assessmentId/delete:
    delete:
      tags:
        - Assessment
      description: 'Delete assessment'
      operationId: assessment
      responses:
        '200':
          description: successful operation
        '400':
          description: Bad request
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Assessment'
    # create question
  /question/add:
    post:
      tags:
        - Question
      description: 'Create question'
      operationId: question
      responses:
        '200':
          description: successful operation
        '400':
          description: Bad request
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Question'
    # update question
  /question/questionId/assessmentId/update:
    put:
      tags:
        - Question
      description: 'Update question'
      operationId: update
      responses:
        '200':
          description: successful operation
        '400':
          description: Bad request
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Question'
    # create userscore
  /userscore/create:
    post:
      tags:
        - Userscore
      description: 'Create user score'
      operationId: userscore
      responses:
        '200':
          description: successful operation
        '400':
          description: Bad request
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Userscore'
  # get userscore
  /userscore/employeeId/assessmentId:
    get:
      tags:
        - Userscore
      description: 'Get user score'
      operationId: userscore
      responses:
        '200':
          description: successful operation
        '400':
          description: Bad request
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Userscore'
    '/lighting/dimmers/{deviceId}/{value}':
    post:
      tags:
        - Z-Wave
      operationId: setDimmer
      parameters:
        - name: deviceId
          in: path
          required: true
          schema:
            type: string
        - name: value
          in: path
          required: true
          schema:
            type: integer
            format: int32
            minimum: 0
            maximum: 100
      responses:
        '200':
          description: response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
      x-swagger-router-controller: ZWave
  '/lighting/dimmers/{deviceId}/{value}/timer/{timeunit}':
    post:
      tags:
        - Z-Wave
      description: sets a dimmer to a specific value on a timer
      operationId: setDimmerTimer
      parameters:
        - name: deviceId
          in: path
          required: true
          schema:
            type: string
        - name: value
          in: path
          required: true
          schema:
            type: integer
            format: int32
        - name: timeunit
          in: path
          required: true
          schema:
            type: integer
            format: int32
        - name: units
          in: query
          required: false
          schema:
            type: string
            enum:
              - seconds
              - minutes
              - milliseconds
            default: milliseconds
      responses:
        '200':
          description: response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
      x-swagger-router-controller: ZWave
  '/lighting/switches/{deviceId}':
    get:
      tags:
        - Z-Wave
      operationId: getSwitchState
      parameters:
        - name: deviceId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeviceState'
      x-swagger-router-controller: ZWave
  '/lighting/switches/{deviceId}/{value}':
    post:
      tags:
        - Z-Wave
      operationId: setSwitch
      parameters:
        - name: deviceId
          in: path
          required: true
          schema:
            type: string
        - name: value
          in: path
          required: true
          schema:
            type: string
            enum:
              - true
              - false
      responses:
        '200':
          description: response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
      x-swagger-router-controller: ZWave
  '/lighting/switches/{deviceId}/{value}/timer/{minutes}':
    post:
      tags:
        - Z-Wave
      description: sets a switch to a specific value on a timer
      operationId: setSwitchTimer
      parameters:
        - name: deviceId
          in: path
          required: true
          schema:
            type: string
        - name: value
          in: path
          required: true
          schema:
            type: string
            enum:
              - true
              - false
        - name: minutes
          in: path
          required: true
          schema:
            type: integer
            format: int32
      responses:
        '200':
          description: response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
      x-swagger-router-controller: ZWave
  /lightingSummary:
    get:
      tags:
        - Z-Wave
      operationId: getLightingSummary
      responses:
        '200':
          description: ok
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LightingSummary'
      x-swagger-router-controller: ZWave
  /temperature:
    get:
      tags:
        - Environment
      operationId: temperatureSummary
      responses:
        '200':
          description: ok
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TemperatureSummary'
      x-swagger-router-controller: Environment
  '/temperature/forecast/{days}':
    get:
      tags:
        - Environment
      operationId: getForecast
      parameters:
        - name: days
          in: path
          required: true
          schema:
            type: integer
            format: int32
      responses:
        '200':
          description: the forecast
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ForecastResponse'
      x-swagger-router-controller: Environment
  '/temperature/{zoneId}':
    get:
      tags:
        - Environment
      operationId: getZoneTemperature
      parameters:
        - name: zoneId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Zone temperature
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TemperatueZoneStatus'
      x-swagger-router-controller: Environment
  '/temperature/{zoneId}/heater':
    get:
      tags:
        - Environment
      description: gets the state of the heater
      operationId: getHeaterState
      parameters:
        - name: zoneId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: heater state
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HeaterState'
      x-swagger-router-controller: Environment
  '/temperature/{zoneId}/heater/{state}':
    post:
      tags:
        - Environment
      description: turns the heater on or off
      operationId: setHeaterState
      parameters:
        - name: zoneId
          in: path
          required: true
          schema:
            type: string
        - name: state
          in: path
          required: true
          schema:
            type: string
            enum:
              - false
              - true
      responses:
        '200':
          description: Status of the operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
      x-swagger-router-controller: Environment
  /zones:
    get:
      tags:
        - Zones
      operationId: getZones
      responses:
        '200':
          description: ok
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
      x-swagger-router-controller: Zones
  '/zones/{zoneId}/quiet':
    get:
      tags:
        - Zones
      operationId: quietZone
      parameters:
        - name: zoneId
          in: path
          required: true
          schema:
            type: string
            enum:
              - basement
              - first-floor
              - second-floor
      responses:
        '200':
          description: ok
      x-swagger-router-controller: Zones
components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT 
  schemas:
    LightingSummary:
      type: object
      properties:
        zones:
          type: array
          items:
            $ref: '#/components/schemas/LightingZone'
        zoneStatus:
          type: array
          items:
            $ref: '#/components/schemas/LightingZoneStatus'
      description: ok
    LightingZone:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        deviceId:
          type: integer
          format: int32
        deviceType:
          type: string
          enum:
            - dimmer
            - switch
        zone:
          type: string
    LightingZoneStatus:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        lastUpdate:
          type: string
          format: date-time
        level:
          type: integer
          format: int32
      description: the status of the lighting zone.
    TemperatureSummary:
      type: object
      properties:
        zones:
          type: array
          items:
            $ref: '#/components/schemas/TemperatureZone'
        zoneStatus:
          type: array
          items:
            $ref: '#/components/schemas/TemperatueZoneStatus'
      description: ok
    TemperatureZone:
      type: object
      required:
        - id
        - name
      properties:
        id:
          type: integer
          format: int32
          description: the unique identifier for the zone
        name:
          type: string
        inputPosition:
          type: integer
          format: int32
        outputPosition:
          type: integer
          format: int32
        zone:
          type: string
      description: a single temperature zone
    TemperatueZoneStatus:
      type: object
      required:
        - id
        - timestamp
        - value
      properties:
        id:
          type: string
          description: the unique identifier for the zone
        name:
          type: string
          description: the name of the zone
        value:
          type: number
          format: double
          description: the temperature in the zone
        units:
          type: string
          description: the temperature units
          enum:
            - celsius
            - fahrenheit
          default: fahrenheit
        timestamp:
          type: string
          format: date-time
          description: the timestamp when the temperature was measured
      description: status of a single zone
    ApiResponse:
      type: object
      properties:
        code:
          type: integer
          format: int32
        message:
          type: string
          example: everything is ok
    HeaterState:
      type: object
      properties:
        id:
          type: string
        state:
          type: string
    DeviceState:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        lastUpdate:
          type: string
          format: date-time
        level:
          type: integer
          format: int32
    ForecastResponse:
      type: object
      properties:
        city:
          $ref: '#/components/schemas/City'
        values:
          type: array
          items:
            $ref: '#/components/schemas/Forecast'
    Forecast:
      type: object
      properties:
        date:
          type: string
          format: date-time
        pressure:
          type: number
          format: double
        humidity:
          type: integer
          format: int32
        windSpeed:
          type: number
          format: double
        clouds:
          type: integer
          format: int32
        temperature:
          $ref: '#/components/schemas/ForecastTemperature'
        weather:
          $ref: '#/components/schemas/WeatherForecast'
    City:
      type: object
      properties:
        id:
          type: integer
          format: int64
        name:
          type: string
        lat:
          type: number
          format: double
        lon:
          type: number
          format: double
        country:
          type: string
    ForecastTemperature:
      type: object
      properties:
        low:
          type: number
          format: double
        high:
          type: number
          format: double
        morning:
          type: number
          format: double
        day:
          type: number
          format: double
        evening:
          type: number
          format: double
        night:
          type: number
          format: double
    ResetPassword:
      type: object
      properties:
        new_password:
          type: string
          format: string
          example: '12345'
          required: true
        type:
          type: string
          format: string
          example: 'organization | employee'
          required: true
    UserUpdate:
      type: object
      properties:
        email:
          type: string
          format: email
          example: 'test@mail.com'
        username:
          type: string
          format: username
          example: 'johny16'
        full_name:
          type: string
          format: string
          example: "John Doe"
    UsersById:
      parameters:
        - name: zoneId
          in: path
          required: true
          schema:
            type: string
    EmailVerificatikon:
      type: object
      
    RegisterationInfo:
      type: object
      properties:
        email:
          type: string
          format: email
          example: 'test@mail.com'
        full_name:
          type: string
          format: string
          example: "John Doe"
          required: true
        username:
          type: string
          format: text
          example: john doe
        password:
          type: string
          format: password
          example: "1234"
    LoginInfo:
      type: object
      properties:
        email:
          type: string
          format: email
          example: 'test@mail.com'
        password:
          type: string
          format: password
          example: "1234"